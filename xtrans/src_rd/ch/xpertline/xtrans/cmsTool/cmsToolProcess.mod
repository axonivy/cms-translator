[Ivy]
[>Created: Fri Jul 01 11:43:10 CEST 2011]
12FE42499C744A02 3.17 #module
>Proto >Proto Collection #zClass
cs0 cmsToolProcess Big #zClass
cs0 RD #cInfo
cs0 #process
cs0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
cs0 @TextInP .rdData2UIAction .rdData2UIAction #zField
cs0 @TextInP .resExport .resExport #zField
cs0 @TextInP .type .type #zField
cs0 @TextInP .processKind .processKind #zField
cs0 @AnnotationInP-0n ai ai #zField
cs0 @TextInP .xml .xml #zField
cs0 @TextInP .responsibility .responsibility #zField
cs0 @RichDialogInitStart f0 '' #zField
cs0 @RichDialogProcessEnd f1 '' #zField
cs0 @RichDialogProcessStep f3 '' #zField
cs0 @PushWFArc f4 '' #zField
cs0 @RichDialogProcessStart f5 '' #zField
cs0 @RichDialogProcessStep f6 '' #zField
cs0 @PushWFArc f7 '' #zField
cs0 @RichDialogProcessEnd f8 '' #zField
cs0 @PushWFArc f9 '' #zField
cs0 @RichDialogProcessStart f10 '' #zField
cs0 @RichDialogProcessStep f11 '' #zField
cs0 @PushWFArc f12 '' #zField
cs0 @RichDialogProcessEnd f13 '' #zField
cs0 @RichDialogProcessStart f15 '' #zField
cs0 @RichDialogEnd f16 '' #zField
cs0 @PushWFArc f17 '' #zField
cs0 @RichDialogProcessStart f18 '' #zField
cs0 @RichDialogProcessEnd f20 '' #zField
cs0 @RichDialogProcessStart f19 '' #zField
cs0 @RichDialogProcessEnd f21 '' #zField
cs0 @PushWFArc f22 '' #zField
cs0 @PushWFArc f23 '' #zField
cs0 @RichDialogProcessStart f24 '' #zField
cs0 @RichDialogProcessStep f25 '' #zField
cs0 @RichDialogProcessEnd f26 '' #zField
cs0 @PushWFArc f28 '' #zField
cs0 @RichDialogProcessStart f29 '' #zField
cs0 @RichDialogProcessStep f30 '' #zField
cs0 @RichDialogProcessEnd f31 '' #zField
cs0 @PushWFArc f32 '' #zField
cs0 @PushWFArc f33 '' #zField
cs0 @RichDialogProcessStart f34 '' #zField
cs0 @RichDialogProcessStep f35 '' #zField
cs0 @RichDialogProcessEnd f36 '' #zField
cs0 @PushWFArc f37 '' #zField
cs0 @PushWFArc f38 '' #zField
cs0 @RichDialogProcessStart f40 '' #zField
cs0 @PushWFArc f2 '' #zField
cs0 @RichDialogProcessStart f57 '' #zField
cs0 @RichDialog f58 '' #zField
cs0 @RichDialogProcessEnd f60 '' #zField
cs0 @RichDialogProcessStep f61 '' #zField
cs0 @Alternative f62 '' #zField
cs0 @PushWFArc f64 '' #zField
cs0 @PushWFArc f65 '' #zField
cs0 @PushWFArc f66 '' #zField
cs0 @PushWFArc f69 '' #zField
cs0 @PushWFArc f63 '' #zField
cs0 @RichDialogProcessStart f59 '' #zField
cs0 @Alternative f67 '' #zField
cs0 @RichDialogProcessStep f68 '' #zField
cs0 @RichDialog f70 '' #zField
cs0 @RichDialogProcessEnd f71 '' #zField
cs0 @PushWFArc f72 '' #zField
cs0 @PushWFArc f73 '' #zField
cs0 @PushWFArc f75 '' #zField
cs0 @PushWFArc f76 '' #zField
cs0 @RichDialogProcessStep f79 '' #zField
cs0 @PushWFArc f14 '' #zField
cs0 @PushWFArc f74 '' #zField
cs0 @RichDialogProcessEnd f81 '' #zField
cs0 @RichDialogProcessStart f41 '' #zField
cs0 @RichDialogProcessStep f83 '' #zField
cs0 @RichDialogProcessEnd f84 '' #zField
cs0 @RichDialog f87 '' #zField
cs0 @PushWFArc f88 '' #zField
cs0 @Alternative f85 '' #zField
cs0 @PushWFArc f89 '' #zField
cs0 @PushWFArc f90 '' #zField
cs0 @PushWFArc f91 '' #zField
cs0 @Alternative f92 '' #zField
cs0 @PushWFArc f93 '' #zField
cs0 @PushWFArc f86 '' #zField
cs0 @RichDialog f94 '' #zField
cs0 @PushWFArc f95 '' #zField
cs0 @PushWFArc f96 '' #zField
cs0 @RichDialogProcessStart f97 '' #zField
cs0 @RichDialog f98 '' #zField
cs0 @PushWFArc f99 '' #zField
cs0 @RichDialogProcessEnd f100 '' #zField
cs0 @Alternative f103 '' #zField
cs0 @PushWFArc f104 '' #zField
cs0 @RichDialog f105 '' #zField
cs0 @PushWFArc f106 '' #zField
cs0 @Alternative f107 '' #zField
cs0 @PushWFArc f108 '' #zField
cs0 @RichDialogProcessStep f109 '' #zField
cs0 @PushWFArc f110 '' #zField
cs0 @PushWFArc f101 '' #zField
cs0 @PushWFArc f111 '' #zField
cs0 @PushWFArc f113 '' #zField
cs0 @RichDialog f115 '' #zField
cs0 @PushWFArc f116 '' #zField
cs0 @PushWFArc f117 '' #zField
cs0 @RichDialogProcessStart f118 '' #zField
cs0 @RichDialog f119 '' #zField
cs0 @Alternative f120 '' #zField
cs0 @RichDialog f121 '' #zField
cs0 @RichDialogProcessStep f122 '' #zField
cs0 @RichDialogProcessEnd f123 '' #zField
cs0 @Alternative f124 '' #zField
cs0 @PushWFArc f125 '' #zField
cs0 @PushWFArc f126 '' #zField
cs0 @PushWFArc f127 '' #zField
cs0 @PushWFArc f128 '' #zField
cs0 @PushWFArc f129 '' #zField
cs0 @PushWFArc f130 '' #zField
cs0 @PushWFArc f131 '' #zField
cs0 @PushWFArc f132 '' #zField
cs0 @RichDialogBroadcastStart f133 '' #zField
cs0 @RichDialogProcessEnd f134 '' #zField
cs0 @RichDialog f136 '' #zField
cs0 @PushWFArc f137 '' #zField
cs0 @PushWFArc f138 '' #zField
cs0 @RichDialogBroadcastStart f45 '' #zField
cs0 @RichDialogProcessEnd f139 '' #zField
cs0 @RichDialogProcessStart f44 '' #zField
cs0 @RichDialogProcessEnd f82 '' #zField
cs0 @RichDialogProcessStep f141 '' #zField
cs0 @PushWFArc f142 '' #zField
cs0 @PushWFArc f143 '' #zField
cs0 @RichDialogProcessStart f144 '' #zField
cs0 @RichDialogProcessStep f145 '' #zField
cs0 @RichDialogProcessEnd f146 '' #zField
cs0 @PushWFArc f148 '' #zField
cs0 @PushWFArc f147 '' #zField
cs0 @RichDialogMethodStart f152 '' #zField
cs0 @RichDialogMethodStart f149 '' #zField
cs0 @RichDialog f150 '' #zField
cs0 @RichDialogProcessEnd f151 '' #zField
cs0 @PushWFArc f153 '' #zField
cs0 @PushWFArc f154 '' #zField
cs0 @RichDialogProcessEnd f155 '' #zField
cs0 @RichDialog f157 '' #zField
cs0 @PushWFArc f158 '' #zField
cs0 @PushWFArc f156 '' #zField
cs0 @RichDialogProcessStep f159 '' #zField
cs0 @RichDialogProcessStart f160 '' #zField
cs0 @RichDialogProcessEnd f161 '' #zField
cs0 @PushWFArc f162 '' #zField
cs0 @RichDialog f164 '' #zField
cs0 @RichDialogProcessEnd f167 '' #zField
cs0 @PushWFArc f169 '' #zField
cs0 @RichDialogMethodStart f163 '' #zField
cs0 @PushWFArc f165 '' #zField
cs0 @RichDialogMethodStart f166 '' #zField
cs0 @RichDialogProcessStep f171 '' #zField
cs0 @PushWFArc f172 '' #zField
cs0 @PushWFArc f170 '' #zField
cs0 @PushWFArc f135 '' #zField
cs0 @PushWFArc f175 '' #zField
cs0 @RichDialogProcessStart f178 '' #zField
cs0 @RichDialogProcessEnd f179 '' #zField
cs0 @RichDialogProcessStep f181 '' #zField
cs0 @PushWFArc f182 '' #zField
cs0 @PushWFArc f180 '' #zField
cs0 @RichDialogMethodStart f183 '' #zField
cs0 @PushWFArc f184 '' #zField
cs0 @PushWFArc f27 '' #zField
cs0 @RichDialogMethodStart f186 '' #zField
cs0 @RichDialogProcessEnd f187 '' #zField
cs0 @RichDialogProcessStart f177 '' #zField
cs0 @RichDialogProcessEnd f185 '' #zField
cs0 @PushWFArc f189 '' #zField
cs0 @PushWFArc f39 '' #zField
cs0 @PushWFArc f42 '' #zField
cs0 @RichDialogProcessStep f46 '' #zField
cs0 @PushWFArc f47 '' #zField
cs0 @RichDialogProcessStep f53 '' #zField
cs0 @PushWFArc f54 '' #zField
cs0 @PushWFArc f55 '' #zField
cs0 @PushWFArc f43 '' #zField
cs0 @RichDialog f49 '' #zField
cs0 @RichDialogProcessEnd f50 '' #zField
cs0 @PushWFArc f52 '' #zField
cs0 @RichDialogMethodStart f48 '' #zField
cs0 @PushWFArc f51 '' #zField
cs0 @PushWFArc f56 '' #zField
>Proto cs0 cs0 cmsToolProcess #zField
cs0 f0 guid 12FE42499D6D2961 #txt
cs0 f0 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f0 method start() #txt
cs0 f0 disableUIEvents true #txt
cs0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
cs0 f0 outParameterDecl '<> result;
' #txt
cs0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
cs0 f0 38 102 20 20 13 0 #rect
cs0 f0 @|RichDialogInitStartIcon #fIcon
cs0 f1 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f1 38 206 20 20 13 0 #rect
cs0 f1 @|RichDialogProcessEndIcon #fIcon
cs0 f3 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f3 actionTable 'out=in;
' #txt
cs0 f3 actionCode 'import ch.ivyteam.ivy.security.PermissionDeniedException;
import javax.naming.NoPermissionException;
import ch.ivyteam.ivy.application.IProcessModel;
import java.text.SimpleDateFormat;
import java.util.Locale;
import ch.ivyteam.ivy.application.IProcessModelVersion;
import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.ResourcesPlugin;
import org.eclipse.core.resources.IResource;
import ch.ivyteam.ivy.cm.IContentManagementSystem;

//**** init tha panel ************************************************************************************************************/

panel.lnk_export.setEnabled(false);
panel.lnk_addLang.setEnabled(false);
panel.lnk_import.setEnabled(false);
panel.lnk_new.setEnabled(false);
panel.lnk_delete.setEnabled(false);
panel.lnk_showFilter.setVisible(false);
panel.box_filters.setVisible(false);
panel.lup_search.setEnabled(false);
panel.sld_rowHeight.setEnabled(false);
panel.cmb_projects.requestFocus();

if (ivy.var.isRunningOnServer.equalsIgnoreCase("true") || ivy.var.isRunningOnServer.equalsIgnoreCase("y")){
	try{
	ivy.session.loginSessionUser("Developer","Developer");
	List<IProcessModel> models = ivy.request.getApplication().getProcessModels(); 
	List<String> projNames = new List<String>();
	
	for (int i = 0; i < models.size(); i++){
		projNames.add(models.get(i).getName());
	}
	panel.cmb_projects.setListData(projNames);
	}catch (NoPermissionException npe){
		panel.msgBox("<html><b>NoPermssionException:</b> User Developer or the role Everybody must have the System Permission <i>ProcessModelReadAll</i>. Please contact system administrator.</html>");
	}catch (PermissionDeniedException pde){
		panel.msgBox("<html><b>PermissionDeniedException:</b> User Developer or the role Everybody must have the System Permission <i>ProcessModelReadAll</i>. Please contact system administrator.</html>");
	}
}else{
	List<IProject> projects = ResourcesPlugin.getWorkspace().getRoot().getProjects();
	List<String> projNames = new List<String>();
	
	for(int i =0; i < projects.size(); i++){
			projNames.add(projects.get(i).getName());
	}
	panel.cmb_projects.setListData(projNames);
}' #txt
cs0 f3 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f3 30 149 36 23 20 -2 #rect
cs0 f3 @|RichDialogProcessStepIcon #fIcon
cs0 f4 expr out #txt
cs0 f4 48 122 48 148 #arcP
cs0 f5 guid 12FE464A268E26B0 #txt
cs0 f5 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f5 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f5 actionTable 'out=in;
' #txt
cs0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>lnkFilter_Click()</name>
        <nameStyle>17,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f5 190 102 20 20 13 0 #rect
cs0 f5 @|RichDialogProcessStartIcon #fIcon
cs0 f6 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f6 actionTable 'out=in;
' #txt
cs0 f6 actionCode 'panel.box_filters.setVisible(!panel.box_filters.visible);

if (panel.box_filters.visible) {
	panel.lnk_showFilter.setIconUri("/ch/ivyteam/xtrans/icons/filter/up");
} else {
	panel.lnk_showFilter.setIconUri("/ch/ivyteam/xtrans/icons/filter/down");
}' #txt
cs0 f6 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f6 182 156 36 24 20 -2 #rect
cs0 f6 @|RichDialogProcessStepIcon #fIcon
cs0 f7 expr out #txt
cs0 f7 200 122 200 156 #arcP
cs0 f8 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f8 190 214 20 20 13 0 #rect
cs0 f8 @|RichDialogProcessEndIcon #fIcon
cs0 f9 expr out #txt
cs0 f9 200 180 200 214 #arcP
cs0 f10 guid 12FE469143AD929B #txt
cs0 f10 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f10 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f10 actionTable 'out=in;
' #txt
cs0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>cmbProjects_Selected()</name>
        <nameStyle>22,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f10 446 78 20 20 13 0 #rect
cs0 f10 @|RichDialogProcessStartIcon #fIcon
cs0 f11 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f11 actionTable 'out=in;
' #txt
cs0 f11 actionCode 'import java.util.Locale;
import java.util.Collections;

import ch.ivyteam.ivy.application.IProcessModel;
import ch.ivyteam.ivy.richdialog.widgets.components.RHyperlink;
import ch.ivyteam.ivy.richdialog.widgets.components.RCheckBox;
import ch.ivyteam.ivy.cm.IContentObject;

import ch.xpertline.xtrans.CMSObject;
import ch.xpertline.xtrans.CMSTranslator;
import ch.xpertline.xtrans.cmsTree;

// init the panel
panel.tbl_cmsObjects.setVisible(true);
panel.lnk_showFilter.setEnabled(true);
panel.tree_cmsObjects.setTreeData(null);
panel.spr_separator2.setVisible(false);
panel.lup_search.setEnabled(true);
panel.lup_search.setText(ivy.cms.co("/ch/ivyteam/xtrans/labels/searchField_emptyDesc"));
panel.lup_search.setForeground(com.ulcjava.base.application.util.Color.gray);
panel.lnk_showFilter.setVisible(true);
panel.lnk_new.setEnabled(true);
panel.lnk_delete.setEnabled(true);
panel.lnk_addLang.setEnabled(true);
panel.sld_rowHeight.setEnabled(true);
panel.sld_rowHeight.setValue(20);
panel.lnk_export.setEnabled(true);
panel.lnk_import.setEnabled(true);

// Make the cmsTranslator object
CMSTranslator cmsTranslator = null;
if (ivy.var.isRunningOnServer.equalsIgnoreCase("true") || ivy.var.isRunningOnServer.equalsIgnoreCase("y")){
	IProcessModel pm = ivy.request.getApplication().getProcessModels().get(panel.cmb_projects.getSelectedIndex()) as IProcessModel;
	cmsTranslator = new CMSTranslator(pm.getReleasedProcessModelVersion());
}else{
	cmsTranslator = new CMSTranslator(panel.cmb_projects.getSelectedItem().toString());
}
in.cms = cmsTranslator.getCms();
in.translat0r = cmsTranslator;

// Make the List of objects
List<IContentObject> contentList = cmsTranslator.getContentHierarchyList(in.cms.getRootContentObject());
List<CMSObject> bjcts = cmsTranslator.getWholeContent(contentList);
in.contentList = bjcts;

// Make the tree
cmsTree ct = new cmsTree(in.cms.getRootContentObject().getChildren());
Tree trii = ct.getTree();
panel.tree_cmsObjects.setTreeData(trii);

// Make the langs
List<String> langs = new List<String>();
for (int i = 0; i < in.cms.getSupportedLanguages().size(); i++){
	if ((in.cms.getSupportedLanguages().get(i) as Locale).getCountry().trim().length() > 0){
		langs.add((in.cms.getSupportedLanguages().get(i) as Locale).getLanguage().toUpperCase() + "_" + (in.cms.getSupportedLanguages().get(i) as Locale).getCountry());
	}else{
		langs.add((in.cms.getSupportedLanguages().get(i) as Locale).getLanguage().toUpperCase());
	}
}
in.langs = langs;

panel.refresh();

// Make the Filter
int componentCount = panel.box_filters.getComponentCount();
int compnent2delte = 0;
for (int p = 0; p < componentCount; p++){
	if (panel.box_filters.getComponent(compnent2delte).getName() == "filler"){
		compnent2delte++;
	} else {
		panel.box_filters.remove(panel.box_filters.getComponent(compnent2delte));
	}
}



for (int i = 0; i < in.cms.getSupportedLanguages().size(); i++){
	String s = "";
	if ((in.cms.getSupportedLanguages().get(i) as Locale).getCountry().trim().length() > 0){
		s = (in.cms.getSupportedLanguages().get(i) as Locale).getLanguage().toUpperCase() + "_" + (in.cms.getSupportedLanguages().get(i) as Locale).getCountry();
	}else{
		s = (in.cms.getSupportedLanguages().get(i) as Locale).getLanguage().toUpperCase();
	}
	RCheckBox chk = new RCheckBox();
	chk.setText(s);
	chk.setSelected(true);
	chk.setToolTipText((in.cms.getSupportedLanguages().get(i) as Locale).getDisplayLanguage());
	chk.setStyleProperties("{/horizontalAlignment \"RIGHT\"/anchor \"EAST\"/horizontalTextPosition \"RIGHT\"}");
	chk.addValueChangedListener(panel.getLst_checkBoxValueChanged());
	panel.box_filters.set(i, 0, 1, 1, com.ulcjava.base.shared.IDefaults.BOX_LEFT_CENTER, chk);
	in.langCheckBoxes.put(s,panel.box_filters.getComponents().get(panel.box_filters.getComponentCount()-1).getId());
}
panel.box_filters.set(in.recordset.getKeys().size(),0,1,1, com.ulcjava.base.shared.IDefaults.BOX_LEFT_CENTER, panel.getSpr_separator2());
panel.box_filters.set(in.recordset.getKeys().size()+1,0,1,1, com.ulcjava.base.shared.IDefaults.BOX_LEFT_CENTER, panel.getLnk_addLang());

out.langs = cmsTranslator.getLanguages();

in.translat0r.setPanel(panel);
' #txt
cs0 f11 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f11 438 124 36 25 20 -2 #rect
cs0 f11 @|RichDialogProcessStepIcon #fIcon
cs0 f12 expr out #txt
cs0 f12 456 98 456 123 #arcP
cs0 f13 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f13 446 238 20 20 13 0 #rect
cs0 f13 @|RichDialogProcessEndIcon #fIcon
cs0 f15 guid 13006C6401E4BCF2 #txt
cs0 f15 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f15 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f15 actionTable 'out=in;
' #txt
cs0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>btnCloe_Click()</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f15 38 302 20 20 13 0 #rect
cs0 f15 @|RichDialogProcessStartIcon #fIcon
cs0 f16 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f16 guid 13006C70881A9FEF #txt
cs0 f16 38 358 20 20 13 0 #rect
cs0 f16 @|RichDialogEndIcon #fIcon
cs0 f17 expr out #txt
cs0 f17 48 322 48 358 #arcP
cs0 f18 guid 13007292F75D0C0A #txt
cs0 f18 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f18 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f18 actionTable 'out=in;
' #txt
cs0 f18 actionCode 'if (panel.lup_search.getValueAsString() == ivy.cms.co("/ch/ivyteam/xtrans/labels/searchField_emptyDesc") && panel.lup_search.getForeground() == com.ulcjava.base.application.util.Color.gray){
	panel.lup_search.setText("");
	panel.lup_search.setForeground(com.ulcjava.base.application.util.Color.black);
}' #txt
cs0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>txtSearch_focusGained()</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f18 182 278 20 20 13 0 #rect
cs0 f18 @|RichDialogProcessStartIcon #fIcon
cs0 f20 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f20 182 318 20 20 13 0 #rect
cs0 f20 @|RichDialogProcessEndIcon #fIcon
cs0 f19 guid 130072A134ABC964 #txt
cs0 f19 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f19 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f19 actionTable 'out=in;
' #txt
cs0 f19 actionCode 'if (panel.lup_search.getValueAsString() == ""){
	panel.lup_search.setText(ivy.cms.co("/ch/ivyteam/xtrans/labels/searchField_emptyDesc"));
	panel.lup_search.setForeground(com.ulcjava.base.application.util.Color.gray);
}' #txt
cs0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>txtSearch_focusLost()</name>
        <nameStyle>21,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f19 182 366 20 20 13 0 #rect
cs0 f19 @|RichDialogProcessStartIcon #fIcon
cs0 f21 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f21 182 406 20 20 13 0 #rect
cs0 f21 @|RichDialogProcessEndIcon #fIcon
cs0 f22 expr out #txt
cs0 f22 192 386 192 406 #arcP
cs0 f23 expr out #txt
cs0 f23 192 298 192 318 #arcP
cs0 f24 guid 13007B0E6EE2A0B0 #txt
cs0 f24 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f24 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f24 actionTable 'out=in;
' #txt
cs0 f24 actionCode '
' #txt
cs0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pathSelected()</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f24 470 326 20 20 13 0 #rect
cs0 f24 @|RichDialogProcessStartIcon #fIcon
cs0 f25 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f25 actionTable 'out=in;
' #txt
cs0 f25 actionCode 'import com.ulcjava.base.application.table.ULCTableColumn;
import com.ulcjava.base.application.util.Color;
import com.ulcjava.base.application.ULCTable;

import ch.xpertline.xtrans.cmsTool.cmsToolPanel;
import ch.xpertline.ria.util.RDCallbackMethodHandler;
import ch.xpertline.xtrans.CMSObject;

import ch.ivyteam.ivy.richdialog.widgets.components.RCheckBox;
import ch.ivyteam.ivy.richdialog.widgets.components.RTable;
import ch.ivyteam.ivy.cm.IContentObject;


if (panel.tree_cmsObjects.getSelectedTreeNode() != null && in.langs != null && in.langs.size() > 0 && panel.tree_cmsObjects.getTreeData() != null){
	panel.tbl_cmsObjects.setSelectedRecord(null);
	in.selectedTreeNode = panel.tree_cmsObjects.getSelectedTreeNode();
	
	String path = panel.tree_cmsObjects.getSelectionPath().toString().replaceAll("[^A-Za-z0-9üöäÜÖÄ,_-]","").replaceAll(" ","").replaceAll(",","/").replaceFirst("cms/","/");
	List<IContentObject> contentList = null;
	
	if (path == null ||  path.length() < 2 || path == "vnulli"){
		path = "/";
		in.selectedTreeNode = panel.tree_cmsObjects.getTreeData().getRoot();
	}
	
	if(panel.lup_search.getValueAsString().trim().length() > 0 && panel.lup_search.foreground != Color.gray){
		RDCallbackMethodHandler.callRDMethod(panel,"search",null);
	}else{
		if (path == "cms"){
			contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
		} else { 
			try {
				contentList = in.translat0r.getContentHierarchyList(in.cms.getContentObject(path));
			} catch (NullPointerException npe) {
				contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
			} 
		}
		List<CMSObject> bjcts = in.translat0r.getWholeContent(contentList);
		out.contentList = bjcts;
		Recordset rec = in.translat0r.getValueRecordset(bjcts,in.langs);
		rec.sort("Path");
		panel.tbl_cmsObjects.setRecordsetData(rec);
		panel.tbl_cmsObjects.setRowHeight(panel.sld_rowHeight.getValue());
		out.recordset = rec;
	}
} else {
	panel.tree_cmsObjects.setSelectedTreeNode(in.selectedTreeNode);
}


' #txt
cs0 f25 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f25 462 372 36 24 20 -2 #rect
cs0 f25 @|RichDialogProcessStepIcon #fIcon
cs0 f26 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f26 470 430 20 20 14 0 #rect
cs0 f26 @|RichDialogProcessEndIcon #fIcon
cs0 f28 expr out #txt
cs0 f28 480 346 480 372 #arcP
cs0 f29 guid 1301CD67D1C369C7 #txt
cs0 f29 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f29 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f29 actionTable 'out=in;
' #txt
cs0 f29 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>tableCell_edit()</name>
        <nameStyle>16,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f29 654 86 20 20 13 0 #rect
cs0 f29 @|RichDialogProcessStartIcon #fIcon
cs0 f30 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f30 actionTable 'out=in;
' #txt
cs0 f30 actionCode 'import com.ulcjava.base.application.util.Color;
import ch.ivyteam.ivy.cm.IContentObjectValue;
import java.util.Locale;
import ch.ivyteam.ivy.cm.IContentObject;

if (panel.tbl_cmsObjects.getSelectedRecord() != null && panel.tbl_cmsObjects.getSelectedColumn() >= 0){
	if (panel.hdn_tableEvents.getText().startsWith("EDIT:") && in.langs.contains(panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()))){
		String desc = panel.tbl_cmsObjects.getSelectedRecord().getField(panel.tbl_cmsObjects.getSelectedRecord().getKeys().get(panel.tbl_cmsObjects.getSelectedColumn())).toString();
		Locale lcle;
		if (panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).contains("_")){
			lcle = new Locale(panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).substring(0, panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).lastIndexOf("_")), panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).substring(panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).lastIndexOf("_")+1));
		}else{
			lcle = new Locale(panel.tbl_cmsObjects.getColumnName(panel.tbl_cmsObjects.getSelectedColumn()).toUpperCase());
		}
		IContentObject co = in.cms.getContentObject(panel.tbl_cmsObjects.getSelectedRecord().getField("Path").toString());

		in.translat0r.saveObjectValue(co,desc,co.getUri(),lcle);
		if(panel.lup_search.foreground != Color.gray && panel.lup_search.text.trim().length() > 0){
			panel.search();
		}
	}
}' #txt
cs0 f30 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f30 646 132 36 24 20 -2 #rect
cs0 f30 @|RichDialogProcessStepIcon #fIcon
cs0 f31 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f31 654 182 20 20 13 0 #rect
cs0 f31 @|RichDialogProcessEndIcon #fIcon
cs0 f32 expr out #txt
cs0 f32 664 106 664 132 #arcP
cs0 f33 expr out #txt
cs0 f33 664 156 664 182 #arcP
cs0 f34 guid 13021C5D9CCA10FA #txt
cs0 f34 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f34 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f34 actionTable 'out=in;
' #txt
cs0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>langEdited()</name>
        <nameStyle>12,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f34 1606 78 20 20 13 0 #rect
cs0 f34 @|RichDialogProcessStartIcon #fIcon
cs0 f35 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f35 actionTable 'out=in;
' #txt
cs0 f35 actionCode 'import ch.ivyteam.ivy.cm.IContentObject;

String fld = "";
String dlt = "";

fld = panel.hdn_hiddenField.getText().split("/").get(0);
dlt = panel.hdn_hiddenField.getText().split("/").get(1);

if (dlt == "true"){
	in.langs.add(fld);
} else {
	in.langs.remove(fld);
}

String path = panel.tree_cmsObjects.getSelectionPath().toString().replaceAll("[^A-Za-z0-9üöäÜÖÄ,_-]","").replaceAll(" ","").replaceAll(",","/").replaceFirst("cms/","/");
if(path == null || path.length() < 2 || path == "vnulli" || path == "cms"){
	path = "/";
}
ivy.log.debug(path);
List<IContentObject> cntn = in.translat0r.getContentHierarchyList(in.cms.getContentObject(path));
in.contentList = in.translat0r.getWholeContent(cntn);

panel.refresh();

if(panel.lup_search.foreground != com.ulcjava.base.application.util.Color.gray && panel.lup_search.text.trim().length() > 0){
	panel.search();
}
' #txt
cs0 f35 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f35 1598 132 36 24 20 -2 #rect
cs0 f35 @|RichDialogProcessStepIcon #fIcon
cs0 f36 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f36 1606 198 20 20 13 0 #rect
cs0 f36 @|RichDialogProcessEndIcon #fIcon
cs0 f37 expr out #txt
cs0 f37 1616 98 1616 132 #arcP
cs0 f38 expr out #txt
cs0 f38 1616 156 1616 198 #arcP
cs0 f40 guid 13021EE822ADF506 #txt
cs0 f40 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f40 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f40 actionTable 'out=in;
' #txt
cs0 f40 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addLang_Click()</name>
        <nameStyle>15,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f40 1462 70 20 20 13 0 #rect
cs0 f40 @|RichDialogProcessStartIcon #fIcon
cs0 f2 expr out #txt
cs0 f2 48 171 48 206 #arcP
cs0 f57 guid 130402EA78B9D58C #txt
cs0 f57 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f57 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f57 actionTable 'out=in;
' #txt
cs0 f57 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>mnuTblDlt_Click()</name>
        <nameStyle>17,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f57 854 526 20 20 13 0 #rect
cs0 f57 @|RichDialogProcessStartIcon #fIcon
cs0 f58 targetWindow NEW:card: #txt
cs0 f58 targetDisplay TOP #txt
cs0 f58 richDialogId ch.xpertline.xtrans.common.yesNo #txt
cs0 f58 startMethod start(String,String) #txt
cs0 f58 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f58 requestActionDecl '<String message, String type> param;' #txt
cs0 f58 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/deleteObjectsAswer");
param.type="warn";
' #txt
cs0 f58 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f58 responseMappingAction 'out=in;
out.answer=result.result;
' #txt
cs0 f58 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/messages/deleteObjectsTitle\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f58 isAsynch false #txt
cs0 f58 isInnerRd true #txt
cs0 f58 userContext '* ' #txt
cs0 f58 846 572 36 24 20 -2 #rect
cs0 f58 @|RichDialogIcon #fIcon
cs0 f60 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f60 854 718 20 20 13 0 #rect
cs0 f60 @|RichDialogProcessEndIcon #fIcon
cs0 f61 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f61 actionTable 'out=in;
' #txt
cs0 f61 actionCode 'List<String> paths = new List<String>();
Recordset rec = panel.tbl_cmsObjects.getRecordsetData();
List<Record> slctd = panel.tbl_cmsObjects.getSelectedRecords();

panel.tbl_cmsObjects.setSelectedRecord(null);
panel.tbl_cmsObjects.setSelectedRecords(null);

for (int i = 0; i < slctd.size(); i++){
	paths.add(slctd.get(i).getField("Path").toString());
	rec.remove(slctd.get(i));
}

panel.tbl_cmsObjects.setRecordsetData(rec);
in.translat0r.deleteObjects(paths);' #txt
cs0 f61 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f61 846 668 36 24 20 -2 #rect
cs0 f61 @|RichDialogProcessStepIcon #fIcon
cs0 f62 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f62 850 618 28 28 14 0 #rect
cs0 f62 @|AlternativeIcon #fIcon
cs0 f64 expr in #txt
cs0 f64 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f64 864 646 864 668 #arcP
cs0 f65 expr in #txt
cs0 f65 878 632 874 728 #arcP
cs0 f65 1 904 632 #addKink
cs0 f65 2 904 728 #addKink
cs0 f65 1 0.44254831658271343 0 0 #arcLabel
cs0 f66 expr out #txt
cs0 f66 864 692 864 718 #arcP
cs0 f69 expr out #txt
cs0 f69 864 546 864 572 #arcP
cs0 f69 0 0.5178769778955135 0 0 #arcLabel
cs0 f63 expr out #txt
cs0 f63 864 596 864 618 #arcP
cs0 f59 guid 1304487E0A5996A2 #txt
cs0 f59 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f59 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f59 actionTable 'out=in;
' #txt
cs0 f59 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>mnuTreeDlt_Click()</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f59 1006 526 20 20 13 1 #rect
cs0 f59 @|RichDialogProcessStartIcon #fIcon
cs0 f67 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f67 1002 618 28 28 14 0 #rect
cs0 f67 @|AlternativeIcon #fIcon
cs0 f68 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f68 actionTable 'out=in;
' #txt
cs0 f68 actionCode 'import ch.xpertline.xtrans.CMSObject;
import ch.ivyteam.ivy.cm.IContentObject;
import com.ulcjava.base.application.tree.TreePath;
List<Tree> trees = new List<Tree>();
List<String> paths = new List<String>();
String pathTop = "";

if (panel.tree_cmsObjects.getSelectedTreeNodes() != null && panel.tree_cmsObjects.getSelectedTreeNodes().size() > 0){
	trees = panel.tree_cmsObjects.getSelectedTreeNodes();
	
	for (int i = trees.size() -1; i >= 0; i--){
		List<Tree> currTreePath = trees.get(i).getPath();
		String path2add = "";
		for (int j = 1; j < currTreePath.size(); j++){
			path2add = path2add + "/" + currTreePath.get(j).getValue().toString();
		}
		paths.add(path2add);
		panel.tree_cmsObjects.getSelectedTreeNodes().get(0).getParent().remove(trees.get(i));
	}
	ivy.log.debug(paths);
	in.translat0r.deleteObjects(paths);
	
	panel.tbl_cmsObjects.setSelectedRecord(null);
	panel.tree_cmsObjects.setSelectedTreeNode(null);
	
	List<IContentObject> contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
	
	List<CMSObject> bjcts = in.translat0r.getWholeContent(contentList);
	out.contentList = bjcts;
	Recordset rec = in.translat0r.getValueRecordset(bjcts,in.langs);
	panel.tbl_cmsObjects.setRecordsetData(rec);	
	out.recordset = rec;
	panel.tree_cmsObjects.setSelectedTreeNode(null);
	panel.tree_cmsObjects.setSelectedTreeNodes(null);

	in.selectedTreeNode = panel.tree_cmsObjects.getTreeData().getRoot();
	panel.tree_cmsObjects.setSelectedTreeNode(in.selectedTreeNode);
}
' #txt
cs0 f68 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f68 998 668 36 24 20 -2 #rect
cs0 f68 @|RichDialogProcessStepIcon #fIcon
cs0 f70 targetWindow NEW:card: #txt
cs0 f70 targetDisplay TOP #txt
cs0 f70 richDialogId ch.xpertline.xtrans.common.yesNo #txt
cs0 f70 startMethod start(String,String) #txt
cs0 f70 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f70 requestActionDecl '<String message, String type> param;' #txt
cs0 f70 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/deleteAllFolder");
param.type="warn";
' #txt
cs0 f70 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f70 responseMappingAction 'out=in;
out.answer=result.result;
' #txt
cs0 f70 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/messages/deleteObjectsTitle\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f70 isAsynch false #txt
cs0 f70 isInnerRd true #txt
cs0 f70 userContext '* ' #txt
cs0 f70 998 572 36 24 20 -2 #rect
cs0 f70 @|RichDialogIcon #fIcon
cs0 f71 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f71 1006 718 20 20 13 0 #rect
cs0 f71 @|RichDialogProcessEndIcon #fIcon
cs0 f72 expr in #txt
cs0 f72 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f72 1016 646 1016 668 #arcP
cs0 f72 0 0.2629657909918751 0 0 #arcLabel
cs0 f73 expr in #txt
cs0 f73 1030 632 1026 728 #arcP
cs0 f73 1 1048 632 #addKink
cs0 f73 2 1048 728 #addKink
cs0 f73 1 0.16995398781997506 0 0 #arcLabel
cs0 f75 expr out #txt
cs0 f75 1016 596 1016 618 #arcP
cs0 f76 expr out #txt
cs0 f76 1016 546 1016 572 #arcP
cs0 f79 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f79 actionTable 'out=in;
' #txt
cs0 f79 actionCode 'in.selectedTreeNode = panel.tree_cmsObjects.getSelectedTreeNode();
' #txt
cs0 f79 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f79 438 180 36 24 20 -2 #rect
cs0 f79 @|RichDialogProcessStepIcon #fIcon
cs0 f14 expr out #txt
cs0 f14 456 204 456 238 #arcP
cs0 f74 expr out #txt
cs0 f74 1016 692 1016 718 #arcP
cs0 f81 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f81 1462 190 20 20 13 0 #rect
cs0 f81 @|RichDialogProcessEndIcon #fIcon
cs0 f41 guid 130455411FF6BC3A #txt
cs0 f41 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f41 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f41 actionTable 'out=in;
' #txt
cs0 f41 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addNewFolder()</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f41 822 86 20 20 13 0 #rect
cs0 f41 @|RichDialogProcessStartIcon #fIcon
cs0 f83 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f83 actionTable 'out=in;
' #txt
cs0 f83 actionCode 'import ch.ivyteam.ivy.persistence.PersistencyException;

String path = "";

for (int i = 1; i < panel.tree_cmsObjects.getSelectedTreeNode().getPath().size(); i++){
	path = path + "/" + panel.tree_cmsObjects.getSelectedTreeNode().getPath().get(i).getValue();
}
if (path == ""){
	path = "/";
}
try{
	in.translat0r.addNewFolder(path,in.folderName);
	ivy.log.debug(path);
	if (path == "/" || path == ""){
		panel.tree_cmsObjects.getTreeData().getRoot().add(new Tree(in.folderName));
	}else{
		panel.tree_cmsObjects.getSelectedTreeNode().add(new Tree(in.folderName));
	}
	in.answer = "y";
} catch(PersistencyException pe){
	in.answer = "n";
}' #txt
cs0 f83 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f83 814 228 36 24 20 -2 #rect
cs0 f83 @|RichDialogProcessStepIcon #fIcon
cs0 f84 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f84 822 326 20 20 13 0 #rect
cs0 f84 @|RichDialogProcessEndIcon #fIcon
cs0 f87 targetWindow NEW:card: #txt
cs0 f87 targetDisplay TOP #txt
cs0 f87 richDialogId ch.xpertline.xtrans.common.nameInputBox #txt
cs0 f87 startMethod startWithOutput() #txt
cs0 f87 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f87 requestActionDecl '<> param;' #txt
cs0 f87 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f87 responseMappingAction 'out=in;
out.answer=result.result;
out.folderName=result.name;
' #txt
cs0 f87 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/labels/newFolder\")%>"/width 0 /height 0 /centered true /resizable false /maximized false /close_after_last_rd true }' #txt
cs0 f87 isAsynch false #txt
cs0 f87 isInnerRd true #txt
cs0 f87 userContext '* ' #txt
cs0 f87 814 132 36 24 20 -2 #rect
cs0 f87 @|RichDialogIcon #fIcon
cs0 f88 expr out #txt
cs0 f88 832 106 832 132 #arcP
cs0 f85 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f85 818 178 28 28 14 0 #rect
cs0 f85 @|AlternativeIcon #fIcon
cs0 f89 expr out #txt
cs0 f89 832 156 832 178 #arcP
cs0 f90 expr in #txt
cs0 f90 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f90 832 206 832 228 #arcP
cs0 f90 0 0.579033564549399 0 0 #arcLabel
cs0 f91 expr in #txt
cs0 f91 846 192 842 336 #arcP
cs0 f91 1 864 192 #addKink
cs0 f91 2 864 336 #addKink
cs0 f91 1 0.24708312625812962 0 0 #arcLabel
cs0 f92 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f92 818 274 28 28 14 0 #rect
cs0 f92 @|AlternativeIcon #fIcon
cs0 f93 expr out #txt
cs0 f93 832 252 832 274 #arcP
cs0 f86 expr in #txt
cs0 f86 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f86 832 302 832 326 #arcP
cs0 f94 targetWindow NEW:card: #txt
cs0 f94 targetDisplay TOP #txt
cs0 f94 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f94 startMethod start(String,String) #txt
cs0 f94 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f94 requestActionDecl '<String message, String type> param;' #txt
cs0 f94 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/itemAllreadyExists");
param.type="error";
' #txt
cs0 f94 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f94 responseMappingAction 'out=in;
' #txt
cs0 f94 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/messages/DuplicateContentName\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f94 isAsynch false #txt
cs0 f94 isInnerRd true #txt
cs0 f94 userContext '* ' #txt
cs0 f94 758 196 36 24 20 -2 #rect
cs0 f94 @|RichDialogIcon #fIcon
cs0 f95 expr in #txt
cs0 f95 818 288 776 220 #arcP
cs0 f95 1 776 288 #addKink
cs0 f95 1 0.04969299295375946 0 0 #arcLabel
cs0 f96 expr out #txt
cs0 f96 776 196 814 144 #arcP
cs0 f96 1 776 144 #addKink
cs0 f96 0 0.9024164940908139 0 0 #arcLabel
cs0 f97 guid 13045D645A6378D1 #txt
cs0 f97 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f97 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f97 actionTable 'out=in;
out.currLevel=panel.tree_cmsObjects.getSelectedTreeNode();
' #txt
cs0 f97 actionCode 'import java.util.Locale;

in.newObjectData.langs = new List<Locale>();
in.newObjectData.name = "";
in.newObjectData.path = "";
in.newObjectData.type = "";
in.newObjectData.values = new List<String>(); ' #txt
cs0 f97 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addNewObject()</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f97 750 382 20 20 13 0 #rect
cs0 f97 @|RichDialogProcessStartIcon #fIcon
cs0 f98 targetWindow NEW:card: #txt
cs0 f98 targetDisplay TOP #txt
cs0 f98 richDialogId ch.xpertline.xtrans.common.newObjectDialog #txt
cs0 f98 startMethod start(Tree,Tree,String,String) #txt
cs0 f98 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f98 requestActionDecl '<Tree tree, Tree currLevel, String name, String type> param;' #txt
cs0 f98 requestMappingAction 'param.tree=panel.tree_cmsObjects.getTreeData();
param.currLevel=in.currLevel;
param.name=in.newObjectData.name;
param.type=in.newObjectData.type;
' #txt
cs0 f98 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f98 responseMappingAction 'out=in;
out.currLevel=result.currLoc;
out.newObjectData.name=result.name;
out.newObjectData.path=result.path;
out.newObjectData.type=result.type;
' #txt
cs0 f98 responseActionCode 'String fullPath = result.path + "/" + result.name;
fullPath.replaceAll("//","/");

if (in.cms.getContentObject(fullPath) == null || result.answer.equalsIgnoreCase("c") || result.answer == ""){
	out.answer = result.answer;
} else {
	out.answer = "e";
}' #txt
cs0 f98 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/labels/newObject\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f98 isAsynch false #txt
cs0 f98 isInnerRd true #txt
cs0 f98 userContext '* ' #txt
cs0 f98 742 428 36 24 20 -2 #rect
cs0 f98 @|RichDialogIcon #fIcon
cs0 f99 expr out #txt
cs0 f99 760 402 760 428 #arcP
cs0 f100 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f100 750 686 20 20 13 0 #rect
cs0 f100 @|RichDialogProcessEndIcon #fIcon
cs0 f103 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f103 746 474 28 28 14 0 #rect
cs0 f103 @|AlternativeIcon #fIcon
cs0 f104 expr out #txt
cs0 f104 760 452 760 474 #arcP
cs0 f105 targetWindow NEW:card: #txt
cs0 f105 targetDisplay TOP #txt
cs0 f105 richDialogId ch.xpertline.xtrans.common.newObjectValuesDialog #txt
cs0 f105 startMethod start(String,String,List<java.util.Locale>,java.util.Locale) #txt
cs0 f105 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f105 requestActionDecl '<String fullPath, String type, List<java.util.Locale> langs, java.util.Locale defaultLang> param;' #txt
cs0 f105 requestMappingAction 'param.fullPath=in.newObjectData.path+"/"+in.newObjectData.name;
param.type=in.newObjectData.type;
param.defaultLang=in.cms.getDefaultLanguage();
' #txt
cs0 f105 requestActionCode 'import java.util.Locale;

List<Locale> locs = in.cms.getSupportedLanguages();
locs.remove(in.cms.getDefaultLanguage());
param.langs = locs;' #txt
cs0 f105 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f105 responseMappingAction 'out=in;
out.answer=result.answer;
out.newObjectData.langs=result.langs;
out.newObjectData.values=result.vals;
' #txt
cs0 f105 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/labels/newObject\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f105 isAsynch false #txt
cs0 f105 isInnerRd true #txt
cs0 f105 userContext '* ' #txt
cs0 f105 742 524 36 24 20 -2 #rect
cs0 f105 @|RichDialogIcon #fIcon
cs0 f106 expr in #txt
cs0 f106 outCond in.answer.equalsIgnoreCase("n") #txt
cs0 f106 760 502 760 524 #arcP
cs0 f107 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f107 746 570 28 28 14 0 #rect
cs0 f107 @|AlternativeIcon #fIcon
cs0 f108 expr out #txt
cs0 f108 760 548 760 570 #arcP
cs0 f109 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f109 actionTable 'out=in;
' #txt
cs0 f109 actionCode 'import java.util.Locale;

if (in.newObjectData.langs.size() < 1){
	in.newObjectData.langs.add(in.cms.getDefaultLanguage());
	in.newObjectData.values.add("");
}

if (in.newObjectData.path.trim().replaceAll(" ","").equalsIgnoreCase("")){
	in.newObjectData.path = "/";
}
in.translat0r.addNewObject(in.newObjectData.path,in.newObjectData.name,in.newObjectData.type,in.newObjectData.langs,in.newObjectData.values);

String currPath = "";
for (int i = 1; i < panel.tree_cmsObjects.getSelectedTreeNode().getPath().size(); i++){
	currPath = currPath + "/" + panel.tree_cmsObjects.getSelectedTreeNode().getPath().get(i).getValue();
}
if (currPath.replaceAll(" ","").trim().length() < 1){
	currPath = "/";
}

ivy.log.debug(currPath + " -------- " + in.newObjectData.path);
if (in.newObjectData.path.equalsIgnoreCase(currPath)){
	Record row = new Record();
	row.putField("Name",in.newObjectData.name);
	for (int i = 0; i < in.langs.size(); i++){
		if (in.newObjectData.langs.contains(new Locale(in.langs.get(i)))){
			row.putField(in.langs.get(i),in.newObjectData.values.get(in.newObjectData.langs.indexOf(new Locale(in.langs.get(i)))));
		} else {
			row.putField(in.langs.get(i),"");
		}
	}
	
	String path = in.newObjectData.path+"/"+in.newObjectData.name;
	if (path.trim().startsWith("//")){
		path = path.trim().substring(1);
	}
	ivy.log.debug(path);
	row.putField("Path",path);
	in.recordset.add(row);
	in.recordset.sort("Path");
	panel.tbl_cmsObjects.setSelectedRecord(row);
}

if(panel.lup_search.foreground != com.ulcjava.base.application.util.Color.gray && panel.lup_search.text.trim().length() > 0){
	panel.search();
}' #txt
cs0 f109 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f109 742 620 36 24 20 -2 #rect
cs0 f109 @|RichDialogProcessStepIcon #fIcon
cs0 f110 expr in #txt
cs0 f110 outCond 'in.answer == "f"' #txt
cs0 f110 760 598 760 620 #arcP
cs0 f101 expr out #txt
cs0 f101 760 644 760 686 #arcP
cs0 f111 expr in #txt
cs0 f111 outCond 'in.answer == "b"' #txt
cs0 f111 746 584 742 440 #arcP
cs0 f111 1 720 584 #addKink
cs0 f111 2 712 576 #addKink
cs0 f111 3 704 584 #addKink
cs0 f111 4 680 584 #addKink
cs0 f111 5 680 448 #addKink
cs0 f111 6 688 440 #addKink
cs0 f111 4 0.4861111111111111 0 0 #arcLabel
cs0 f113 expr in #txt
cs0 f113 outCond in.answer.equalsIgnoreCase("f") #txt
cs0 f113 746 488 742 632 #arcP
cs0 f113 1 720 488 #addKink
cs0 f113 2 712 496 #addKink
cs0 f113 3 712 624 #addKink
cs0 f113 4 720 632 #addKink
cs0 f113 2 0.33657007880794254 0 0 #arcLabel
cs0 f115 targetWindow NEW:card: #txt
cs0 f115 targetDisplay TOP #txt
cs0 f115 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f115 startMethod start(String,String) #txt
cs0 f115 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f115 requestActionDecl '<String message, String type> param;' #txt
cs0 f115 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/itemAllreadyExists");
param.type="error";
' #txt
cs0 f115 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f115 responseMappingAction 'out=in;
' #txt
cs0 f115 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/messages/DuplicateContentName\")%>"/width 0 /height 0 /centered true /resizable false /maximized false /close_after_last_rd true }' #txt
cs0 f115 isAsynch false #txt
cs0 f115 isInnerRd true #txt
cs0 f115 userContext '* ' #txt
cs0 f115 814 452 36 24 20 -2 #rect
cs0 f115 @|RichDialogIcon #fIcon
cs0 f116 expr in #txt
cs0 f116 outCond in.answer.equalsIgnoreCase("e") #txt
cs0 f116 774 488 832 476 #arcP
cs0 f116 1 832 488 #addKink
cs0 f116 0 0.9116363011742824 0 0 #arcLabel
cs0 f117 expr out #txt
cs0 f117 832 452 778 440 #arcP
cs0 f117 1 832 440 #addKink
cs0 f117 1 0.327870928981941 0 0 #arcLabel
cs0 f118 guid 1306489179462A81 #txt
cs0 f118 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f118 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f118 actionTable 'out=in;
' #txt
cs0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>addNewObjectFast()</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f118 982 190 20 20 13 0 #rect
cs0 f118 @|RichDialogProcessStartIcon #fIcon
cs0 f119 targetWindow NEW:card: #txt
cs0 f119 targetDisplay TOP #txt
cs0 f119 richDialogId ch.xpertline.xtrans.common.nameInputBox #txt
cs0 f119 startMethod startWithOutput() #txt
cs0 f119 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f119 requestActionDecl '<> param;' #txt
cs0 f119 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f119 responseMappingAction 'out=in;
out.answer=result.result;
out.folderName=result.name;
' #txt
cs0 f119 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/labels/newObject\")%>"/width 0 /height 0 /centered true /resizable false /maximized false /close_after_last_rd true }' #txt
cs0 f119 isAsynch false #txt
cs0 f119 isInnerRd true #txt
cs0 f119 userContext '* ' #txt
cs0 f119 974 244 36 24 20 -2 #rect
cs0 f119 @|RichDialogIcon #fIcon
cs0 f120 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f120 978 290 28 28 14 0 #rect
cs0 f120 @|AlternativeIcon #fIcon
cs0 f121 targetWindow NEW:card: #txt
cs0 f121 targetDisplay TOP #txt
cs0 f121 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f121 startMethod start(String,String) #txt
cs0 f121 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f121 requestActionDecl '<String message, String type> param;' #txt
cs0 f121 requestMappingAction 'param.message=ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/itemAllreadyExists");
param.type="error";
' #txt
cs0 f121 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f121 responseMappingAction 'out=in;
' #txt
cs0 f121 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/messages/DuplicateContentName\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f121 isAsynch false #txt
cs0 f121 isInnerRd true #txt
cs0 f121 userContext '* ' #txt
cs0 f121 926 308 36 24 20 -2 #rect
cs0 f121 @|RichDialogIcon #fIcon
cs0 f122 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f122 actionTable 'out=in;
' #txt
cs0 f122 actionCode 'import java.util.Locale;
import ch.ivyteam.ivy.persistence.PersistencyException;
String path = "";

List<String> vals = new List<String>();
List<Locale> locl = new List<Locale>();
vals.add("");
locl.add(in.cms.getDefaultLanguage());

for (int i = 1; i < panel.tree_cmsObjects.getSelectedTreeNode().getPath().size(); i++){
	path = path + "/" + panel.tree_cmsObjects.getSelectedTreeNode().getPath().get(i).getValue();
}
if (path == ""){
	path = "/";
}
try{
	in.translat0r.addNewObject(path,in.folderName,"String",locl,vals);
	Record row = new Record();
	row.putField("Name",in.folderName);
	for (int i = 0; i < in.langs.size(); i++){
		row.putField(in.langs.get(i),"");
	}
	path = path + "/" + in.folderName;
	while (path.startsWith("//")){path = path.substring(1);}
	row.putField("Path",path);
	in.recordset.add(row);
	in.recordset.sort("Path");
	panel.tbl_cmsObjects.setSelectedRecord(row);
	in.answer = "y";
	if(panel.lup_search.foreground != com.ulcjava.base.application.util.Color.gray && panel.lup_search.text.trim().length() > 0){
		panel.search();
	}
} catch(PersistencyException pe){
	in.answer = "n";
}' #txt
cs0 f122 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f122 974 340 36 24 20 -2 #rect
cs0 f122 @|RichDialogProcessStepIcon #fIcon
cs0 f123 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f123 982 430 20 20 13 0 #rect
cs0 f123 @|RichDialogProcessEndIcon #fIcon
cs0 f124 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f124 978 386 28 28 14 0 #rect
cs0 f124 @|AlternativeIcon #fIcon
cs0 f125 expr out #txt
cs0 f125 992 268 992 290 #arcP
cs0 f126 expr in #txt
cs0 f126 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f126 992 318 992 340 #arcP
cs0 f127 expr in #txt
cs0 f127 1006 304 1002 440 #arcP
cs0 f127 1 1032 304 #addKink
cs0 f127 2 1032 440 #addKink
cs0 f127 1 0.38817446356549234 0 0 #arcLabel
cs0 f128 expr out #txt
cs0 f128 992 364 992 386 #arcP
cs0 f129 expr in #txt
cs0 f129 outCond in.answer.equalsIgnoreCase("y") #txt
cs0 f129 992 414 992 430 #arcP
cs0 f130 expr in #txt
cs0 f130 978 400 944 332 #arcP
cs0 f130 1 944 400 #addKink
cs0 f130 0 0.9646379420823907 0 0 #arcLabel
cs0 f131 expr out #txt
cs0 f131 944 308 974 256 #arcP
cs0 f131 1 944 256 #addKink
cs0 f131 0 0.9024164940908139 0 0 #arcLabel
cs0 f132 expr out #txt
cs0 f132 992 210 992 244 #arcP
cs0 f133 guid 1306A194A9A85B44 #txt
cs0 f133 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f133 broadcast supportedLangAdded #txt
cs0 f133 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f133 actionTable 'out=in;
' #txt
cs0 f133 actionCode 'in.lcle2add = param.lang;
' #txt
cs0 f133 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>supportedLangAdded</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f133 1462 262 20 20 13 0 #rect
cs0 f133 @|RichDialogBroadcastStartIcon #fIcon
cs0 f134 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f134 1462 374 20 20 13 0 #rect
cs0 f134 @|RichDialogProcessEndIcon #fIcon
cs0 f136 targetWindow NEW:card: #txt
cs0 f136 targetDisplay TOP #txt
cs0 f136 richDialogId ch.xpertline.xtrans.common.languagManager #txt
cs0 f136 startMethod start(List<java.util.Locale>) #txt
cs0 f136 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f136 requestActionDecl '<List<java.util.Locale> currLangList> param;' #txt
cs0 f136 requestMappingAction 'param.currLangList=in.cms.getSupportedLanguages();
' #txt
cs0 f136 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f136 responseMappingAction 'out=in;
' #txt
cs0 f136 windowConfiguration '{/title "_"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f136 isAsynch true #txt
cs0 f136 isInnerRd true #txt
cs0 f136 userContext '* ' #txt
cs0 f136 1454 124 36 24 20 -2 #rect
cs0 f136 @|RichDialogIcon #fIcon
cs0 f136 -13016147|-1|-16777216 #nodeStyle
cs0 f137 expr out #txt
cs0 f137 1472 148 1472 190 #arcP
cs0 f138 expr out #txt
cs0 f138 1472 90 1472 124 #arcP
cs0 f45 guid 1306A4F19042D64D #txt
cs0 f45 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f45 broadcast supportedLangRemoved #txt
cs0 f45 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f45 actionTable 'out=in;
out.lcle2rmv=param.lang;
' #txt
cs0 f45 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>supportedLangRemoved</name>
        <nameStyle>20,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f45 1558 374 20 20 13 0 #rect
cs0 f45 @|RichDialogBroadcastStartIcon #fIcon
cs0 f139 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f139 1558 470 20 20 13 0 #rect
cs0 f139 @|RichDialogProcessEndIcon #fIcon
cs0 f44 guid 13073D0B7CF2E0B0 #txt
cs0 f44 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f44 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f44 actionTable 'out=in;
' #txt
cs0 f44 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>rowHeight_changed()</name>
        <nameStyle>19,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f44 214 470 20 20 13 0 #rect
cs0 f44 @|RichDialogProcessStartIcon #fIcon
cs0 f82 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f82 214 574 20 20 13 0 #rect
cs0 f82 @|RichDialogProcessEndIcon #fIcon
cs0 f141 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f141 actionTable 'out=in;
' #txt
cs0 f141 actionCode panel.tbl_cmsObjects.setRowHeight(panel.sld_rowHeight.getValue()); #txt
cs0 f141 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f141 206 516 36 24 20 -2 #rect
cs0 f141 @|RichDialogProcessStepIcon #fIcon
cs0 f142 expr out #txt
cs0 f142 224 490 224 516 #arcP
cs0 f143 expr out #txt
cs0 f143 224 540 224 574 #arcP
cs0 f144 guid 130747A267EE298B #txt
cs0 f144 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f144 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f144 actionTable 'out=in;
' #txt
cs0 f144 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>export</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f144 1310 110 20 20 13 0 #rect
cs0 f144 @|RichDialogProcessStartIcon #fIcon
cs0 f145 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f145 actionTable 'out=in;
' #txt
cs0 f145 actionCode 'import ch.xpertline.xtrans.excel.ProgressMessage;
import ch.xpertline.xtrans.excel.exportHandler;

exportHandler exp = new exportHandler(panel);
java.io.File file = exp.transformTable2Excel(panel.tbl_cmsObjects, panel.cmb_projects.getSelectedItem().toString());

if (file != null){
	ivy.log.debug(file.getAbsolutePath().toString());
	ProgressMessage msg  = exp.export	(file);
	ivy.log.debug(msg.text);
}' #txt
cs0 f145 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f145 1303 156 34 24 20 -2 #rect
cs0 f145 @|RichDialogProcessStepIcon #fIcon
cs0 f146 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f146 1310 206 20 20 13 0 #rect
cs0 f146 @|RichDialogProcessEndIcon #fIcon
cs0 f148 expr out #txt
cs0 f148 1320 180 1320 206 #arcP
cs0 f147 expr out #txt
cs0 f147 1320 130 1320 156 #arcP
cs0 f152 guid 1308D380D201A768 #txt
cs0 f152 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f152 method exportSuccess(ch.xpertline.xtrans.excel.ProgressMessage) #txt
cs0 f152 disableUIEvents false #txt
cs0 f152 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.xpertline.xtrans.excel.ProgressMessage message> param = methodEvent.getInputArguments();
' #txt
cs0 f152 inParameterMapAction 'out.errorMessage=param.message.text;
' #txt
cs0 f152 outParameterDecl '<> result;
' #txt
cs0 f152 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>exportSuccess(ProgressMessage)</name>
        <nameStyle>30,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f152 1190 62 20 20 13 0 #rect
cs0 f152 @|RichDialogMethodStartIcon #fIcon
cs0 f149 guid 1308D38377189ED6 #txt
cs0 f149 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f149 method errorMethod(ch.xpertline.xtrans.excel.ProgressMessage) #txt
cs0 f149 disableUIEvents false #txt
cs0 f149 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.xpertline.xtrans.excel.ProgressMessage message> param = methodEvent.getInputArguments();
' #txt
cs0 f149 inActionCode 'out.errorMessage = param.message.text;' #txt
cs0 f149 outParameterDecl '<> result;
' #txt
cs0 f149 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>errorMethod(ProgressMessage)</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f149 1806 86 20 20 13 0 #rect
cs0 f149 @|RichDialogMethodStartIcon #fIcon
cs0 f149 -8355712|-8355712|-16777216 #nodeStyle
cs0 f150 targetWindow NEW:card: #txt
cs0 f150 targetDisplay TOP #txt
cs0 f150 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f150 startMethod start(String,String) #txt
cs0 f150 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f150 requestActionDecl '<String message, String type> param;' #txt
cs0 f150 requestMappingAction 'param.message=in.errorMessage;
param.type="error";
' #txt
cs0 f150 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f150 responseMappingAction 'out=in;
' #txt
cs0 f150 windowConfiguration '{/title "Error"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f150 isAsynch false #txt
cs0 f150 isInnerRd true #txt
cs0 f150 userContext '* ' #txt
cs0 f150 1798 148 36 24 20 -2 #rect
cs0 f150 @|RichDialogIcon #fIcon
cs0 f150 -8355712|-8355712|-16777216 #nodeStyle
cs0 f151 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f151 1806 206 20 20 13 0 #rect
cs0 f151 @|RichDialogProcessEndIcon #fIcon
cs0 f151 -12566464|-1|-16777216 #nodeStyle
cs0 f153 expr out #txt
cs0 f153 1816 106 1816 148 #arcP
cs0 f154 expr out #txt
cs0 f154 1816 172 1816 206 #arcP
cs0 f155 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f155 1190 166 20 20 13 0 #rect
cs0 f155 @|RichDialogProcessEndIcon #fIcon
cs0 f157 targetWindow NEW:card: #txt
cs0 f157 targetDisplay TOP #txt
cs0 f157 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f157 startMethod start(String,String) #txt
cs0 f157 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f157 requestActionDecl '<String message, String type> param;' #txt
cs0 f157 requestMappingAction 'param.message=in.errorMessage;
param.type="info";
' #txt
cs0 f157 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f157 responseMappingAction 'out=in;
' #txt
cs0 f157 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/xtrans/labels/common/success\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f157 isAsynch false #txt
cs0 f157 isInnerRd true #txt
cs0 f157 userContext '* ' #txt
cs0 f157 1182 116 36 24 20 -2 #rect
cs0 f157 @|RichDialogIcon #fIcon
cs0 f158 expr out #txt
cs0 f158 1200 82 1200 116 #arcP
cs0 f156 expr out #txt
cs0 f156 1200 140 1200 166 #arcP
cs0 f159 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f159 actionTable 'out=in;
' #txt
cs0 f159 actionCode 'import ch.xpertline.xtrans.excel.importHandler;

importHandler ih = new importHandler(panel);
in.importData = ih.importExcel();
' #txt
cs0 f159 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f159 1302 356 36 24 20 -2 #rect
cs0 f159 @|RichDialogProcessStepIcon #fIcon
cs0 f160 guid 1308D924CA796E59 #txt
cs0 f160 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f160 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f160 actionTable 'out=in;
' #txt
cs0 f160 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>import</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f160 1310 310 20 20 13 0 #rect
cs0 f160 @|RichDialogProcessStartIcon #fIcon
cs0 f161 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f161 1310 414 20 20 13 0 #rect
cs0 f161 @|RichDialogProcessEndIcon #fIcon
cs0 f162 expr out #txt
cs0 f162 1320 330 1320 356 #arcP
cs0 f164 targetWindow NEW:card: #txt
cs0 f164 targetDisplay TOP #txt
cs0 f164 richDialogId ch.xpertline.xtrans.excel.importWizard #txt
cs0 f164 startMethod start(List<String>) #txt
cs0 f164 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f164 requestActionDecl '<List<String> langs> param;' #txt
cs0 f164 requestMappingAction 'param.langs=in.importData.langList;
' #txt
cs0 f164 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f164 responseMappingAction 'out=in;
' #txt
cs0 f164 responseActionCode 'import ch.xpertline.xtrans.CMSObject;
import ch.xpertline.xtrans.cmsTool.cmsToolPanel;

import ch.ivyteam.ivy.richdialog.widgets.components.RTable;
import ch.ivyteam.ivy.cm.IContentObject;
import ch.ivyteam.ivy.richdialog.widgets.components.RCheckBox;

import com.ulcjava.base.application.table.ULCTableColumn;
import com.ulcjava.base.application.ULCTable;


if (result.answer.equalsIgnoreCase("y")){
	
	int c = 0;
	if (in.importData.valueList != null){
		ivy.log.debug(in.importData.valueList);
		ivy.log.debug(result.langs);
		ivy.log.debug(result.createNew.toString()+result.overwrite.toString()+result.unsupportedLangs.toString());
	  c = in.translat0r.executeImport(in.importData.valueList,result.langs,result.createNew,result.overwrite,result.unsupportedLangs);
	}
	String s = ivy.cms.co("/ch/ivyteam/xtrans/labels/messages/imoportSuccess").replace("[countOfImportedObjects]",c.toString());
	
	if(result.unsupportedLangs){
	 List<String> l = result.langs;
	 l.removeAll(in.langs);
	 in.langs.addAll(l);
	}
	
	if (panel.tree_cmsObjects.getSelectedTreeNode() != null && in.langs != null && in.langs.size() > 0 && panel.tree_cmsObjects.getTreeData() != null){
		panel.tbl_cmsObjects.setSelectedRecord(null);
		in.selectedTreeNode = panel.tree_cmsObjects.getSelectedTreeNode();
		
		String path = panel.tree_cmsObjects.getSelectionPath().toString().replaceAll("[^A-Za-z0-9üöäÜÖÄ,_-]","").replaceAll(" ","").replaceAll(",","/").replaceFirst("cms/","/");
		List<IContentObject> contentList = null;
		
		if (path == null ||  path.length() < 2 || path == "vnulli"){
			path = "/";
			in.selectedTreeNode = panel.tree_cmsObjects.getTreeData().getRoot();
		}
		
		if (path == "cms"){
			contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
		} else { 
			try {
				contentList = in.translat0r.getContentHierarchyList(in.cms.getContentObject(path));
			} catch (NullPointerException npe) {
				contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
			} 
		}
		List<CMSObject> bjcts = in.translat0r.getWholeContent(contentList);
		out.contentList = bjcts;
		Recordset rec = in.translat0r.getValueRecordset(bjcts,in.langs);
		rec.sort("Path");
		panel.tbl_cmsObjects.setRecordsetData(rec);
		panel.tbl_cmsObjects.setRowHeight(panel.sld_rowHeight.getValue());
		out.recordset = rec;
	} else {
		panel.tree_cmsObjects.setSelectedTreeNode(in.selectedTreeNode);
	}
	if(panel.lup_search.foreground != com.ulcjava.base.application.util.Color.gray && panel.lup_search.text.trim().length() > 0){
		panel.search();
	}
	
	panel.msgBox(s);
}
' #txt
cs0 f164 windowConfiguration '{/title "_"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f164 isAsynch false #txt
cs0 f164 isInnerRd true #txt
cs0 f164 userContext '* ' #txt
cs0 f164 1182 285 36 23 20 -2 #rect
cs0 f164 @|RichDialogIcon #fIcon
cs0 f167 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f167 1190 342 20 20 13 0 #rect
cs0 f167 @|RichDialogProcessEndIcon #fIcon
cs0 f169 expr out #txt
cs0 f169 1320 380 1320 414 #arcP
cs0 f163 guid 13097616E789F752 #txt
cs0 f163 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f163 method importWizzard(ch.xpertline.xtrans.excel.ImportData) #txt
cs0 f163 disableUIEvents false #txt
cs0 f163 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>importWizzard(importData)</name>
    </language>
</elementInfo>
' #txt
cs0 f163 1190 238 20 20 13 0 #rect
cs0 f163 @|RichDialogMethodStartIcon #fIcon
cs0 f165 expr out #txt
cs0 f165 1200 258 1200 284 #arcP
cs0 f166 guid 13097B06E5084899 #txt
cs0 f166 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f166 method supportedLangAdded(java.util.Locale) #txt
cs0 f166 disableUIEvents false #txt
cs0 f166 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.util.Locale lcle> param = methodEvent.getInputArguments();
' #txt
cs0 f166 inActionCode 'out.lcle2add = param.lcle;' #txt
cs0 f166 outParameterDecl '<> result;
' #txt
cs0 f166 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>supportedLangAdded(Locale)</name>
        <nameStyle>26,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f166 1502 294 20 20 13 0 #rect
cs0 f166 @|RichDialogMethodStartIcon #fIcon
cs0 f171 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f171 actionTable 'out=in;
' #txt
cs0 f171 actionCode 'import ch.ivyteam.ivy.cm.IContentObject;
import java.util.Locale;
import ch.ivyteam.ivy.richdialog.widgets.components.RCheckBox;

panel.box_filters.remove(panel.box_filters.getComponent(panel.box_filters.getComponentCount()-1));

Locale loc2add = in.lcle2add;
String s;

if (loc2add.getCountry().trim().length() > 0){
	s = loc2add.getLanguage().toUpperCase() + "_" + loc2add.getCountry();
}else{
	s = loc2add.getLanguage().toUpperCase();	
}

RCheckBox chk = new RCheckBox();
chk.setText(s);
chk.setToolTipText(loc2add.getDisplayLanguage());
chk.setSelected(true);
chk.setStyleProperties("{/horizontalAlignment \"RIGHT\"/anchor \"EAST\"/horizontalTextPosition \"RIGHT\"}");
chk.addValueChangedListener(panel.getLst_checkBoxValueChanged());
panel.box_filters.set(panel.box_filters.getComponentCount() , 0, 1, 1, com.ulcjava.base.shared.IDefaults.BOX_LEFT_CENTER, chk);
in.langCheckBoxes.put(s.toUpperCase(),panel.box_filters.getComponents().get(panel.box_filters.getComponentCount()-1).getId());
panel.box_filters.set(panel.box_filters.getComponentCount()+1,0, 1, 1, com.ulcjava.base.shared.IDefaults.BOX_LEFT_CENTER, panel.getLnk_addLang());

in.cms.addSupportedLanguage(loc2add);
in.langs.add(s);

String path = panel.tree_cmsObjects.getSelectionPath().toString().replaceAll("[^A-Za-z0-9üöäÜÖÄ,_-]","").replaceAll(" ","").replaceAll(",","/").replaceFirst("cms/","/");
if(path == null || path.length() < 2 || path == "vnulli" || path == "cms"){
	path = "/";
}
ivy.log.debug(path);
List<IContentObject> cntn = in.translat0r.getContentHierarchyList(in.cms.getContentObject(path));
in.contentList = in.translat0r.getWholeContent(cntn);

panel.refresh();
' #txt
cs0 f171 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f171 1454 324 36 24 20 -2 #rect
cs0 f171 @|RichDialogProcessStepIcon #fIcon
cs0 f172 expr out #txt
cs0 f172 1504 310 1487 324 #arcP
cs0 f170 expr out #txt
cs0 f170 1472 282 1472 324 #arcP
cs0 f135 expr out #txt
cs0 f135 1472 348 1472 374 #arcP
cs0 f175 expr out #txt
cs0 f175 456 148 456 180 #arcP
cs0 f175 0 0.5371134198302877 0 0 #arcLabel
cs0 f178 guid 130ABCDF9D137D6F #txt
cs0 f178 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f178 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f178 actionTable 'out=in;
' #txt
cs0 f178 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>search()</name>
        <nameStyle>8,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f178 278 654 20 20 13 0 #rect
cs0 f178 @|RichDialogProcessStartIcon #fIcon
cs0 f179 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f179 278 766 20 20 13 0 #rect
cs0 f179 @|RichDialogProcessEndIcon #fIcon
cs0 f181 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f181 actionTable 'out=in;
' #txt
cs0 f181 actionCode 'import ch.ivyteam.ivy.cm.IContentObject;
import ch.xpertline.xtrans.CMSObject;

String path = panel.tree_cmsObjects.getSelectionPath().toString().replaceAll("[^A-Za-z0-9üöäÜÖÄ,_-]","").replaceAll(" ","").replaceAll(",","/").replaceFirst("cms/","/");
if (path == null ||  path.length() < 2 || path == "vnulli"){
	path = "/";
	in.selectedTreeNode = panel.tree_cmsObjects.getTreeData().getRoot();
}

List<IContentObject> contentList = null;
if (path == "cms"){
	contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
} else { 
	try {
		contentList = in.translat0r.getContentHierarchyList(in.cms.getContentObject(path));
	} catch (NullPointerException npe) {
		contentList = in.translat0r.getContentHierarchyList(in.cms.getRootContentObject());
	} 
}

List<CMSObject> bjcts = in.translat0r.getWholeContent(contentList);
out.contentList = bjcts;
Recordset fullRec = in.translat0r.getValueRecordset(bjcts, in.langs);
fullRec.sort("Path");
panel.tbl_cmsObjects.setRowHeight(panel.sld_rowHeight.getValue());
in.recordset = fullRec;

if (panel.lup_search.getForeground() != com.ulcjava.base.application.util.Color.gray && panel.lup_search.getValueAsString().trim().length() > 0){
	ivy.log.debug(panel.lup_search.getForeground().toString() + " is not " + com.ulcjava.base.application.util.Color.gray.toString());
	Recordset rec = new Recordset(in.recordset.getKeys());
	Boolean b = false;
	String srch = panel.lup_search.getValueAsString().toUpperCase();
	for(int i = 0; i < in.recordset.getRecords().size(); i++){
		b = false;
		for (int j = 0; j < in.recordset.getKeys().size() && !b; j++){
			if (in.recordset.getAt(i).getValues().get(j).toString().toUpperCase().contains(srch)){
				rec.add(in.recordset.getAt(i));
				b = true;
			}
		}
	}
	in.recordset = rec;
	panel.tbl_cmsObjects.setRecordsetData(in.recordset);

}else{
	panel.tbl_cmsObjects.setRecordsetData(in.recordset);
}' #txt
cs0 f181 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f181 270 708 36 24 20 -2 #rect
cs0 f181 @|RichDialogProcessStepIcon #fIcon
cs0 f182 expr out #txt
cs0 f182 288 674 288 708 #arcP
cs0 f180 expr out #txt
cs0 f180 288 732 288 766 #arcP
cs0 f183 guid 130ABF79C4EAB749 #txt
cs0 f183 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f183 method search() #txt
cs0 f183 disableUIEvents false #txt
cs0 f183 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
cs0 f183 outParameterDecl '<> result;
' #txt
cs0 f183 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>search()</name>
        <nameStyle>8,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f183 206 678 20 20 13 -18 #rect
cs0 f183 @|RichDialogMethodStartIcon #fIcon
cs0 f184 expr out #txt
cs0 f184 225 692 270 712 #arcP
cs0 f184 0 0.403421964505304 0 0 #arcLabel
cs0 f27 expr out #txt
cs0 f27 480 396 480 430 #arcP
cs0 f186 guid 130AC0BC4B9B865E #txt
cs0 f186 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f186 method refresh() #txt
cs0 f186 disableUIEvents false #txt
cs0 f186 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh()</name>
    </language>
</elementInfo>
' #txt
cs0 f186 278 142 20 20 13 0 #rect
cs0 f186 @|RichDialogMethodStartIcon #fIcon
cs0 f187 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f187 278 246 20 20 13 0 #rect
cs0 f187 @|RichDialogProcessEndIcon #fIcon
cs0 f177 guid 130ACC3B9CFBEE98 #txt
cs0 f177 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f177 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f177 actionTable 'out=in;
' #txt
cs0 f177 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>bitte...</name>
        <nameStyle>8,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f177 294 550 20 20 13 0 #rect
cs0 f177 @|RichDialogProcessStartIcon #fIcon
cs0 f185 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f185 294 606 20 20 13 0 #rect
cs0 f185 @|RichDialogProcessEndIcon #fIcon
cs0 f189 expr out #txt
cs0 f189 304 570 304 606 #arcP
cs0 f39 expr in #txt
cs0 f39 outCond 'in.answer == "c"' #txt
cs0 f39 774 584 760 686 #arcP
cs0 f39 1 808 584 #addKink
cs0 f39 2 808 656 #addKink
cs0 f39 3 800 664 #addKink
cs0 f39 4 760 664 #addKink
cs0 f39 0 0.8025515413890567 0 0 #arcLabel
cs0 f42 expr in #txt
cs0 f42 outCond in.answer.equalsIgnoreCase("c") #txt
cs0 f42 767 495 760 686 #arcP
cs0 f42 1 808 536 #addKink
cs0 f42 2 808 656 #addKink
cs0 f42 3 800 664 #addKink
cs0 f42 4 760 664 #addKink
cs0 f42 0 0.7991198273141746 0 0 #arcLabel
cs0 f46 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f46 actionTable 'out=in;
' #txt
cs0 f46 actionCode 'import com.ulcjava.base.application.ULCComponent;
import java.util.Locale;
import ch.ivyteam.ivy.richdialog.widgets.components.RCheckBox;

Locale loc2rmv = in.lcle2rmv;
String s;

if (loc2rmv.getCountry().trim().length() > 0){
	s = loc2rmv.getLanguage().toUpperCase() + "_" + loc2rmv.getCountry();
}else{
	s = loc2rmv.getLanguage().toUpperCase();	
}

in.translat0r.removeLanguage(loc2rmv);
in.langs.remove(s);



List<ULCComponent> comps = panel.box_filters.getComponents();
for (int i = 0; i < comps.size(); i++){
	ULCComponent comp = comps.get(i);
	if (comp.getId() == in.langCheckBoxes.get(s)){
		panel.box_filters.remove(comp);
	}
}


in.langs.remove(loc2rmv.getLanguage().toUpperCase());
panel.refresh();' #txt
cs0 f46 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f46 1550 420 36 24 20 -2 #rect
cs0 f46 @|RichDialogProcessStepIcon #fIcon
cs0 f47 expr out #txt
cs0 f47 1568 444 1568 470 #arcP
cs0 f53 actionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f53 actionTable 'out=in;
' #txt
cs0 f53 actionCode 'Recordset rec = in.translat0r.getValueRecordset(in.contentList,in.langs);
rec.sort("Path");
panel.tbl_cmsObjects.setRecordsetData(rec);

// M4KE TH3 M0D3L C0NF1G
String defConf = "{/showTableheader true /autoTableheader false /showtooltip true /showIcons false /version \"3.0\"/columns {{/result \"result=record.getField(\\\"Name\\\")\"/version \"3.0\"/tooltip \"\"/icon \"\"/header \"\\\"Name\\\"\"/field \"\"/editable \"false\"/condition \"\"/columnStyle \"\"/cellWidget \"\"}{/result \"result=record.getField(\\\"EN\\\")\"/version \"3.0\"/tooltip \"\"/icon \"\"/header \"\\\"EN\\\"\"/field \"\"/editable \"true\"/condition \"\"/columnStyle \"\"/cellWidget \"TextFieldCellWidget\"}{/result \"result=record.getField(\\\"Path\\\")\"/version \"3.0\"/tooltip \"\"/icon \"\"/header \"\\\"Path\\\"\"/field \"\"/editable \"false\"/condition \"\"/columnStyle \"default\"/cellWidget \"\"}}}";
String modConf = "";
for (int i = 1; i < rec.columnCount()-1;i++){
	if (rec.getKeys().get(i).equalsIgnoreCase(in.cms.getDefaultLanguage().getLanguage().toUpperCase())){
		modConf = modConf + 
		"{/result \"result=record.getField(\\\"" +
		rec.getKeys().get(i) +
		"\\\")\"/version \"3.0\"/tooltip \"result=record.getField(\\\"" +
		in.cms.getDefaultLanguage().getLanguage().toUpperCase() +
		"\\\")\"/icon \"\"/header \"\\\"" +
		rec.getKeys().get(i) +
		"\\\"\"/field \"" +
		rec.getKeys().get(i) +
		"\"/editable \"true\"/condition \"\"/columnStyle \"\"/cellWidget \"TextFieldCellWidget\"/patterns * }";
	}else{
		modConf = modConf + 
		"{/result \"result=record.getField(\\\"" +
		rec.getKeys().get(i) +
		"\\\")\"/version \"3.0\"/tooltip \"result=record.getField(\\\"" +
		in.cms.getDefaultLanguage().getLanguage().toUpperCase() +
		"\\\")\"/icon \"\"/header \"\\\"" +
		rec.getKeys().get(i) +
		"\\\"\"/field \""+
		rec.getKeys().get(i)+
		"\"/editable \"true\"/condition \"\"/columnStyle \"cmsObject\"/cellWidget \"TextFieldCellWidget\"/patterns * }";
	}
}
modConf = defConf.replace("{/result \"result=record.getField(\\\"EN\\\")\"/version \"3.0\"/tooltip \"\"/icon \"\"/header \"\\\"EN\\\"\"/field \"\"/editable \"true\"/condition \"\"/columnStyle \"\"/cellWidget \"TextFieldCellWidget\"}",modConf);


// Repaint tha table
panel.repaintTable(modConf);
panel.tbl_cmsObjects.setRecordsetData(rec);
panel.tbl_cmsObjects.setRowHeight(panel.sld_rowHeight.getValue());
out.recordset = rec;' #txt
cs0 f53 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f53 270 188 36 24 20 -2 #rect
cs0 f53 @|RichDialogProcessStepIcon #fIcon
cs0 f54 expr out #txt
cs0 f54 288 162 288 188 #arcP
cs0 f55 expr out #txt
cs0 f55 288 212 288 246 #arcP
cs0 f43 expr out #txt
cs0 f43 1568 394 1568 420 #arcP
cs0 f49 targetWindow NEW:card: #txt
cs0 f49 targetDisplay TOP #txt
cs0 f49 richDialogId ch.xpertline.xtrans.common.message #txt
cs0 f49 startMethod start(String,String) #txt
cs0 f49 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f49 requestActionDecl '<String message, String type> param;' #txt
cs0 f49 requestMappingAction 'param.message=in.errorMessage;
param.type="info";
' #txt
cs0 f49 responseActionDecl 'ch.xpertline.xtrans.cmsTool.cmsToolData out;
' #txt
cs0 f49 responseMappingAction 'out=in;
' #txt
cs0 f49 windowConfiguration '{/title "_"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
cs0 f49 isAsynch false #txt
cs0 f49 isInnerRd true #txt
cs0 f49 userContext '* ' #txt
cs0 f49 190 844 36 24 20 -2 #rect
cs0 f49 @|RichDialogIcon #fIcon
cs0 f50 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f50 198 894 20 20 13 0 #rect
cs0 f50 @|RichDialogProcessEndIcon #fIcon
cs0 f52 expr out #txt
cs0 f52 208 868 208 894 #arcP
cs0 f48 guid 130B1A3235766480 #txt
cs0 f48 type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
cs0 f48 method msgBox(String) #txt
cs0 f48 disableUIEvents false #txt
cs0 f48 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String Message> param = methodEvent.getInputArguments();
' #txt
cs0 f48 inParameterMapAction 'out.errorMessage=param.Message;
' #txt
cs0 f48 outParameterDecl '<> result;
' #txt
cs0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>msgBox(String)</name>
        <nameStyle>14,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
cs0 f48 198 798 20 20 13 0 #rect
cs0 f48 @|RichDialogMethodStartIcon #fIcon
cs0 f51 expr out #txt
cs0 f51 208 818 208 844 #arcP
cs0 f56 expr out #txt
cs0 f56 1200 307 1200 342 #arcP
>Proto cs0 .ui2RdDataAction 'out.recordset=panel.tbl_cmsObjects.recordsetData;
' #txt
>Proto cs0 .rdData2UIAction 'panel.hdn_tableEvents.text=in.recordset.toString();
panel.tbl_cmsObjects.recordsetData=in.recordset;
' #txt
>Proto cs0 .type ch.xpertline.xtrans.cmsTool.cmsToolData #txt
>Proto cs0 .processKind RICH_DIALOG #txt
>Proto cs0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Strart/Close 
Method(s)</swimlaneLabel>
        <swimlaneLabel>Misc</swimlaneLabel>
        <swimlaneLabel>Selection/Updating</swimlaneLabel>
        <swimlaneLabel>Objects
</swimlaneLabel>
        <swimlaneLabel>Import/Export</swimlaneLabel>
        <swimlaneLabel>Language</swimlaneLabel>
        <swimlaneLabel>E2202</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>151</swimlaneSize>
    <swimlaneSize>258</swimlaneSize>
    <swimlaneSize>213</swimlaneSize>
    <swimlaneSize>530</swimlaneSize>
    <swimlaneSize>274</swimlaneSize>
    <swimlaneSize>325</swimlaneSize>
    <swimlaneSize>150</swimlaneSize>
    <swimlaneColor>-3355444</swimlaneColor>
    <swimlaneColor>-10027009</swimlaneColor>
    <swimlaneColor>-10027162</swimlaneColor>
    <swimlaneColor>-154</swimlaneColor>
    <swimlaneColor>-10066177</swimlaneColor>
    <swimlaneColor>-13369396</swimlaneColor>
    <swimlaneColor>-6750208</swimlaneColor>
</elementInfo>
' #txt
>Proto cs0 -8 -8 16 16 16 26 #rect
>Proto cs0 '' #fIcon
cs0 f0 mainOut f4 tail #connect
cs0 f4 head f3 mainIn #connect
cs0 f5 mainOut f7 tail #connect
cs0 f7 head f6 mainIn #connect
cs0 f6 mainOut f9 tail #connect
cs0 f9 head f8 mainIn #connect
cs0 f10 mainOut f12 tail #connect
cs0 f12 head f11 mainIn #connect
cs0 f15 mainOut f17 tail #connect
cs0 f17 head f16 mainIn #connect
cs0 f19 mainOut f22 tail #connect
cs0 f22 head f21 mainIn #connect
cs0 f18 mainOut f23 tail #connect
cs0 f23 head f20 mainIn #connect
cs0 f24 mainOut f28 tail #connect
cs0 f28 head f25 mainIn #connect
cs0 f29 mainOut f32 tail #connect
cs0 f32 head f30 mainIn #connect
cs0 f30 mainOut f33 tail #connect
cs0 f33 head f31 mainIn #connect
cs0 f34 mainOut f37 tail #connect
cs0 f37 head f35 mainIn #connect
cs0 f35 mainOut f38 tail #connect
cs0 f38 head f36 mainIn #connect
cs0 f3 mainOut f2 tail #connect
cs0 f2 head f1 mainIn #connect
cs0 f62 out f64 tail #connect
cs0 f64 head f61 mainIn #connect
cs0 f62 out f65 tail #connect
cs0 f65 head f60 mainIn #connect
cs0 f61 mainOut f66 tail #connect
cs0 f66 head f60 mainIn #connect
cs0 f57 mainOut f69 tail #connect
cs0 f69 head f58 mainIn #connect
cs0 f58 mainOut f63 tail #connect
cs0 f63 head f62 in #connect
cs0 f67 out f72 tail #connect
cs0 f72 head f68 mainIn #connect
cs0 f67 out f73 tail #connect
cs0 f73 head f71 mainIn #connect
cs0 f70 mainOut f75 tail #connect
cs0 f75 head f67 in #connect
cs0 f59 mainOut f76 tail #connect
cs0 f76 head f70 mainIn #connect
cs0 f79 mainOut f14 tail #connect
cs0 f14 head f13 mainIn #connect
cs0 f68 mainOut f74 tail #connect
cs0 f74 head f71 mainIn #connect
cs0 f41 mainOut f88 tail #connect
cs0 f88 head f87 mainIn #connect
cs0 f87 mainOut f89 tail #connect
cs0 f89 head f85 in #connect
cs0 f85 out f90 tail #connect
cs0 f90 head f83 mainIn #connect
cs0 f85 out f91 tail #connect
cs0 f91 head f84 mainIn #connect
cs0 f83 mainOut f93 tail #connect
cs0 f93 head f92 in #connect
cs0 f92 out f86 tail #connect
cs0 f86 head f84 mainIn #connect
cs0 f92 out f95 tail #connect
cs0 f95 head f94 mainIn #connect
cs0 f94 mainOut f96 tail #connect
cs0 f96 head f87 mainIn #connect
cs0 f97 mainOut f99 tail #connect
cs0 f99 head f98 mainIn #connect
cs0 f98 mainOut f104 tail #connect
cs0 f104 head f103 in #connect
cs0 f103 out f106 tail #connect
cs0 f106 head f105 mainIn #connect
cs0 f105 mainOut f108 tail #connect
cs0 f108 head f107 in #connect
cs0 f107 out f110 tail #connect
cs0 f110 head f109 mainIn #connect
cs0 f109 mainOut f101 tail #connect
cs0 f101 head f100 mainIn #connect
cs0 f107 out f111 tail #connect
cs0 f111 head f98 mainIn #connect
cs0 f113 head f109 mainIn #connect
cs0 f116 head f115 mainIn #connect
cs0 f115 mainOut f117 tail #connect
cs0 f117 head f98 mainIn #connect
cs0 f119 mainOut f125 tail #connect
cs0 f125 head f120 in #connect
cs0 f120 out f126 tail #connect
cs0 f126 head f122 mainIn #connect
cs0 f120 out f127 tail #connect
cs0 f127 head f123 mainIn #connect
cs0 f122 mainOut f128 tail #connect
cs0 f128 head f124 in #connect
cs0 f124 out f129 tail #connect
cs0 f129 head f123 mainIn #connect
cs0 f124 out f130 tail #connect
cs0 f130 head f121 mainIn #connect
cs0 f121 mainOut f131 tail #connect
cs0 f131 head f119 mainIn #connect
cs0 f118 mainOut f132 tail #connect
cs0 f132 head f119 mainIn #connect
cs0 f136 mainOut f137 tail #connect
cs0 f137 head f81 mainIn #connect
cs0 f40 mainOut f138 tail #connect
cs0 f138 head f136 mainIn #connect
cs0 f44 mainOut f142 tail #connect
cs0 f142 head f141 mainIn #connect
cs0 f141 mainOut f143 tail #connect
cs0 f143 head f82 mainIn #connect
cs0 f145 mainOut f148 tail #connect
cs0 f148 head f146 mainIn #connect
cs0 f144 mainOut f147 tail #connect
cs0 f147 head f145 mainIn #connect
cs0 f149 mainOut f153 tail #connect
cs0 f153 head f150 mainIn #connect
cs0 f150 mainOut f154 tail #connect
cs0 f154 head f151 mainIn #connect
cs0 f152 mainOut f158 tail #connect
cs0 f158 head f157 mainIn #connect
cs0 f157 mainOut f156 tail #connect
cs0 f156 head f155 mainIn #connect
cs0 f160 mainOut f162 tail #connect
cs0 f162 head f159 mainIn #connect
cs0 f159 mainOut f169 tail #connect
cs0 f169 head f161 mainIn #connect
cs0 f163 mainOut f165 tail #connect
cs0 f165 head f164 mainIn #connect
cs0 f166 mainOut f172 tail #connect
cs0 f172 head f171 mainIn #connect
cs0 f133 mainOut f170 tail #connect
cs0 f170 head f171 mainIn #connect
cs0 f171 mainOut f135 tail #connect
cs0 f135 head f134 mainIn #connect
cs0 f11 mainOut f175 tail #connect
cs0 f175 head f79 mainIn #connect
cs0 f178 mainOut f182 tail #connect
cs0 f182 head f181 mainIn #connect
cs0 f181 mainOut f180 tail #connect
cs0 f180 head f179 mainIn #connect
cs0 f183 mainOut f184 tail #connect
cs0 f184 head f181 mainIn #connect
cs0 f25 mainOut f27 tail #connect
cs0 f27 head f26 mainIn #connect
cs0 f177 mainOut f189 tail #connect
cs0 f189 head f185 mainIn #connect
cs0 f107 out f39 tail #connect
cs0 f39 head f100 mainIn #connect
cs0 f103 out f42 tail #connect
cs0 f42 head f100 mainIn #connect
cs0 f103 out f113 tail #connect
cs0 f103 out f116 tail #connect
cs0 f46 mainOut f47 tail #connect
cs0 f47 head f139 mainIn #connect
cs0 f186 mainOut f54 tail #connect
cs0 f54 head f53 mainIn #connect
cs0 f53 mainOut f55 tail #connect
cs0 f55 head f187 mainIn #connect
cs0 f45 mainOut f43 tail #connect
cs0 f43 head f46 mainIn #connect
cs0 f49 mainOut f52 tail #connect
cs0 f52 head f50 mainIn #connect
cs0 f48 mainOut f51 tail #connect
cs0 f51 head f49 mainIn #connect
cs0 f164 mainOut f56 tail #connect
cs0 f56 head f167 mainIn #connect
